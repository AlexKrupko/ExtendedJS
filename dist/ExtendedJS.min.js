/**
 * ExtendedJS
 *
 * Small library which extend basic functionality of JavaScript
 * Chrome 45+, FireFox 40+, Safari 8+, IE10+, iOS Safari 8+, Android Browser 4.4+
 *
 * @author   Alexander Krupko <sanych.zp@gmail.com>
 * @author   Slava Krasnyansky <krasnyansky.v@gmail.com>
 * @copyrigh 2016 Avrora Team www.avrora.team
 * @license  MIT
 * @tutorial http://extendedjs.avrora.team
 * @version  1.0.0
 */
!function(){'use strict';function a(a){return{add:function(b){for(var c=a.length;c--;)for(var d=arguments.length;d--;a[c].classList.add(arguments[d]));},remove:function(b){for(var c=a.length;c--;)for(var d=arguments.length;d--;a[c].classList.remove(arguments[d]));},toggle:function(b,c){for(var d=a.length;d--;a[d].classList.toggle(b,c));}}}function b(){var a=document.querySelectorAll('[data-exjs-element]');return a.each(function(){delete this.dataset.exjsElement}),a}function c(a,b){var d=[];for(var e in a){var f=encodeURIComponent(e);if(b&&(f=b+'['+f+']'),a[e]instanceof Array)for(var g=0;g<a[e].length;d.push(f+'['+g+']='+encodeURIComponent(a[e][g++])));else a[e]instanceof Object?d=d.concat(c(a[e],f)):d.push(f+'='+encodeURIComponent(a[e]))}return d}if(NodeList.prototype.indexOf=HTMLCollection.prototype.indexOf=function(a){return a instanceof Element?Array.prototype.indexOf.call(this,a):-1},!Element.prototype.matches&&function(a){a.matches=a.matchesSelector||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||function(a){return document.querySelectorAll(a).indexOf(this)>=0}}(Element.prototype),'object'!=typeof d)var d=Node;d.prototype.addEvent=Window.prototype.addEvent=function(){if(arguments.length<2)return console.error('ExtendedJS: Invalid amount of arguments. Method addEvent needs minimum 2 arguments.');var a=arguments.length<3?null:arguments[0],b=arguments[arguments.length<3?0:1].split(/\s+/),c=arguments[arguments.length<3?1:2];if('function'!=typeof c)return console.error('ExtendedJS: Invalid callback function.');for(var d=b.length;d--;)this.addEventListener(b[d],function(b){if(a){for(var d=b.target;d&&d!==this&&!d.matches(a);d=d.parentNode);d!==this&&c.call(d,b)}else c.call(this,b)})},d.prototype.addEventOne=Window.prototype.addEventOne=function(){if(arguments.length<2)return console.error('ExtendedJS: Invalid amount of arguments. Method addEventOne needs minimum 2 arguments.');var a=arguments.length<3?null:arguments[0],b=arguments[arguments.length<3?0:1],c=arguments[arguments.length<3?1:2];if('function'!=typeof c)return console.error('ExtendedJS: Invalid callback function.');var d=[];this.addEventListener(b,function(b){var e=this;if(a){for(e=b.target;e&&e!==this&&!e.matches(a);e=e.parentNode);if(e===this)return}d.indexOf(e)<0&&d.push(e)&&c.call(e,b)})},d.prototype.triggerEvent=function(a,b,c){'undefined'==typeof b&&(b=!0),'undefined'==typeof c&&(c=!0);var d=document.createEvent('Event');d.initEvent(a,b,c),this.dispatchEvent(d)},NodeList.prototype.addEvent=HTMLCollection.prototype.addEvent=function(){var a=arguments;this.each(function(){d.prototype.addEvent.apply(this,a)})},NodeList.prototype.addEventOne=HTMLCollection.prototype.addEventOne=function(){var a=arguments;this.each(function(){d.prototype.addEventOne.apply(this,a)})},NodeList.prototype.triggerEvent=HTMLCollection.prototype.triggerEvent=function(a,b,c){this.each(function(){d.prototype.triggerEvent.call(this,a,b,c)})},Element.prototype.getElements=Document.prototype.getElements=function(a){return this.querySelectorAll(a)},NodeList.prototype.each=HTMLCollection.prototype.each=function(a){if('function'!=typeof a)return console.error('ExtendedJS: Invalid callback function.');for(var b=0;b<this.length;a.call(this[b],b++));},DOMTokenList.prototype.contains=function(a){for(var b=Array.prototype.slice.call(this),c=arguments.length;c--;)if(b.indexOf(arguments[c])<0)return!1;return!0},DOMTokenList.prototype.containsOne=function(a){for(var b=Array.prototype.slice.call(this),c=arguments.length;c--;)if(b.indexOf(arguments[c])>=0)return!0;return!1},DOMTokenList.prototype.toggle=function(a,b){return void 0===b&&(b=!this.contains(a)),this[b?'add':'remove'](a),b};var e=document.createElement('div');if(e.classList.add('a','b'),!e.classList.contains('b')){var f=DOMTokenList.prototype.add,g=DOMTokenList.prototype.remove;DOMTokenList.prototype.add=function(a){Array.prototype.forEach.call(arguments,f.bind(this))},DOMTokenList.prototype.remove=function(a){Array.prototype.forEach.call(arguments,g.bind(this))}}var h={get:function(){return this.classList=new a(this)},set:function(){}};Object.defineProperty(NodeList.prototype,'classList',h),Object.defineProperty(HTMLCollection.prototype,'classList',h),Element.prototype.remove=function(){this.parentNode.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){this.each(Element.prototype.remove)},Element.prototype.parent=function(a){var b=this.parentElement;if(a)for(;b&&!b.matches(a);b=b.parentElement);return b},Element.prototype.parents=function(a){for(var c=this;c=c.parentElement;(!a||c.matches(a))&&(c.dataset.exjsElement=1));return b()},Element.prototype.next=function(a){var b=this.nextElementSibling;if(a)for(;b&&!b.matches(a);b=b.nextElementSibling);return b},Element.prototype.nextAll=function(a){for(var c=this;c=c.nextElementSibling;(!a||c.matches(a))&&(c.dataset.exjsElement=1));return b()},Element.prototype.prev=function(a){var b=this.previousElementSibling;if(a)for(;b&&!b.matches(a);b=b.previousElementSibling);return b},Element.prototype.prevAll=function(a){for(var c=this;c=c.previousElementSibling;(!a||c.matches(a))&&(c.dataset.exjsElement=1));return b()},Element.prototype.childs=function(a){return this.children.each(function(){(!a||this.matches(a))&&(this.dataset.exjsElement=1)}),b()},NodeList.prototype.filter=HTMLCollection.prototype.filter=function(a){return this.each(function(){this.matches(a)&&(this.dataset.exjsElement=1)}),b()},Element.prototype.insertAfter=function(a,b){b=b.next(),b?this.insertBefore(a,b):this.appendChild(a)},Element.prototype.prependChild=function(a){this.firstChild?this.insertBefore(a,this.firstChild):this.appendChild(a)},Element.prototype.insertBeforeCurrent=function(a){this.parentNode.insertBefore(a,this)},Element.prototype.insertAfterCurrent=function(a){this.parentNode.insertAfter(a,this)};var i={method:'GET',data:{},headers:{},async:!0,cache:!0,cacheMaxAge:300,jsonp:!1,uri:'',contentType:'',dataType:'text',beforeSend:function(){},success:function(){},error:function(){},complete:function(){},progress:function(){},timeout:0,timeoutError:function(){},abort:function(){},username:'',password:''},j={};window.ExtendedJS=window.ExJS=window.exjs={cookies:{get:function(a){var b=document.cookie.match(new RegExp('(?:^|;\\s*)'+encodeURIComponent(a).replace(/[^\w%]/g,'\\$&')+'\\s*=\\s*([^;]*)(?:$|;)'));return b?decodeURIComponent(b[1]):null},set:function(a,b,c,d,e,f){var g=[encodeURIComponent(a)+'='+encodeURIComponent(b)];c&&(c.constructor===Date?g.push('expires='+c.toUTCString()):c.constructor===Number&&g.push(c===1/0?'expires=Fri, 31 Dec 9999 23:59:59 GMT':'max-age='+c)),e&&g.push('domain='+e),d&&g.push('path='+d),f&&g.push('secure'),document.cookie=g.join('; ')},"delete":function(a,b,c){var d=[encodeURIComponent(a)+'=','expires=Thu, 01 Jan 1970 00:00:00 GMT'];c&&d.push('domain='+c),b&&d.push('path='+b),document.cookie=d.join('; ')},exists:function(a){return new RegExp('(?:^|;\\s*)'+encodeURIComponent(a).replace(/[^\w%]/g,'\\$&')+'=').test(document.cookie)}},scroll:function(a,b){function c(){window.scrollTo(0,window.scrollY+e),++f<d&&setTimeout(c,b/d)}b=b||0;var d=b>0?Math.ceil(b/1e3*30):1,e=(a-window.scrollY)/d,f=0;c()},ajax:function(a,b){'object'!=typeof b&&(b={}),'object'==typeof a?b=a:b.uri=a;var d={};for(var e in i)d[e]=typeof b[e]==typeof i[e]?b[e]:i[e];if('string'!=typeof d.uri||!d.uri)return console.error('ExtendedJS: Invalid uri for AJAX'),!1;if(d.jsonp){var f='jsonp_callback_'+Math.round(1e6*Math.random()),g=document.createElement('script');return window[f]=function(a){delete window[f],document.body.removeChild(g),d.success(a),d.complete(a)},g.src=d.uri.replace(/([?&])callback=[^&]*(&|$)/i,function(a,b,c){return c?b:''}),g.src+=(g.src.indexOf('?')>=0?'&':'?')+'callback='+f,document.body.appendChild(g),!0}if(d.method=d.method.toUpperCase()||'GET','json'===d.contentType.toLowerCase())d.data=JSON.stringify(d.data);else{if('string'==typeof d.data){var h={};d.data.replace(/([^&=]+)(?:=([^&=]*))?(?:&|$)/g,function(a,b,c){h[b]='undefined'!=typeof c?c:''}),d.data=h}d.data instanceof FormData||(d.data='object'==typeof d.data?c(d.data).join('&'):'',d.data&&'POST'!==d.method&&(d.uri+=(d.uri.indexOf('?')<0?'?':'&')+d.data))}var k=new XMLHttpRequest,l='pending';if(k.triggerError=function(){'cache'===l?delete j[d.cache]:d.cache=!1,d.error(k,l)},d.cache){d.cache=0;for(var m=d.uri+d.data+d.method,e=0;e<m.length;d.cache=(d.cache<<5)-d.cache+m.charCodeAt(e++));if('object'==typeof j[d.cache]&&j[d.cache].expires>new Date)return l='cache',d.beforeSend.call(k),d.success.call(k,j[d.cache].response,l),d.complete.call(k,l),!0}k.open(d.method,d.uri,d.async,d.username,d.password),k.onreadystatechange=function(){if(4===k.readyState){var a=k.responseText;if(l='error',200===k.status)if(l='success','json'===d.dataType.toLowerCase())try{a=JSON.parse(a)}catch(b){l='parseError'}else if('html'===d.dataType.toLowerCase()){var c=document.createElement('div');c.innerHTML=a,a=c.children}'success'===l?d.success.call(k,a,l):d.error.call(k,l),'success'===l&&d.cache&&(j[d.cache]={response:a,expires:Date.now()+1e3*d.cacheMaxAge}),d.complete.call(k,l)}},k.timeout=d.timeout,k.ontimeout=function(){d.timeoutError.call(k),d.complete.call(k,'timeout')},k.onabort=function(){d.abort.call(k),d.complete.call(k,'abort')},k.upload.addEventListener('progress',function(a){d.progress.call(k,a.loaded/a.total*100,a)}),d.headers['X-Requested-With']='XMLHttpRequest','json'===d.contentType.toLowerCase()?d.headers['Content-Type']='application/json':'POST'!==d.method||d.data instanceof FormData||(d.headers['Content-Type']='application/x-www-form-urlencoded');for(var n in d.headers)k.setRequestHeader(n,d.headers[n]);return d.beforeSend(k),k.send('POST'===d.method?d.data:null),k},ajaxDefaults:function(a){if('object'==typeof a)for(var b in a)typeof a[b]==typeof i[b]&&(i[b]=a[b])}}}();